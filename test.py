import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# Create a sample dataframe (replace with actual data if needed)
data = {
    'dataset': ['SMAP']*20,
    'Methods': ['greedy+outlier']*20,
    'x': [2, 4, 6, 8, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10],
    'workers': [
        2000, 2000, 2000, 2000, 500, 1000, 1500, 2000, 2500, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000
    ],
    'tasks': [2000]*20,
    'weights': [
        16904.564841, 18817.91675, 19967.181015, 20993.588028, 5015.291729, 10169.653991, 15931.798676,
        21438.404599, 21598.266734, 4991.285463, 10180.931316, 15949.432048, 21596.784083, 16904.564841, 18817.91675,
        19967.181015, 20993.588028, 5015.291729, 10169.653991, 15931.798676, 21438.404599
    ],
    'avg_weights': [
        15.21563, 15.642491, 16.080951, 16.543411, 15.091149, 15.400788, 16.081896, 16.880634, 16.288286,
        15.079412, 15.37131, 16.115964, 16.31177, 15.21563, 15.642491, 16.080951, 16.543411, 15.091149,
        15.400788, 16.081896, 16.880634
    ],
    'ratio(task)': [
        0.5555, 0.6015, 0.620833, 0.6345, 0.166167, 0.330167, 0.495333, 0.635, 0.663, 0.662, 0.662333, 0.659778, 0.5296,
        0.5555, 0.6015, 0.620833, 0.6345, 0.166167, 0.330167, 0.495333, 0.635
    ],
    'ratio(worker)': [
        0.5555, 0.6015, 0.620833, 0.6345, 0.664667, 0.660333, 0.660444, 0.635, 0.5304, 0.1655, 0.331167, 0.494833, 0.662,
        0.5555, 0.6015, 0.620833, 0.6345, 0.664667, 0.660333, 0.660444, 0.635
    ],
    'CPU time(s)': [
        5.687763, 6.188703, 6.431088, 6.201445, 3.923345, 5.230131, 5.761313, 6.472646, 7.574055, 4.024476, 5.232483,
        5.715701, 7.422263, 5.687763, 6.188703, 6.431088, 6.201445, 3.923345, 5.230131, 5.761313, 6.472646
    ],
    'normal_worker_ratio': [
        0.663812, 0.664641, 0.663047, 0.661972, 0.66511, 0.660774, 0.661621, 0.662609, 0.663111, 0.662, 0.662554,
        0.663019, 0.662, 0.663812, 0.664641, 0.663047, 0.661972, 0.66511, 0.660774, 0.661621, 0.662609
    ],
    'normal_task_ratio': [
        0.991038, 0.990792, 0.990744, 0.990436, 0.988659, 0.992662, 0.991318, 0.991478, 0.990998, 0.989333, 0.991664,
        0.991291, 0.991667, 0.991038, 0.990792, 0.990744, 0.990436, 0.988659, 0.992662, 0.991318, 0.991478
    ],
    'normal_utility_ratio': [
        0.665861, 0.66753, 0.662093, 0.659998, 0.661883, 0.660068, 0.660991, 0.662094, 0.663404, 0.660114, 0.661511,
        0.663869, 0.661477, 0.665861, 0.66753, 0.662093, 0.659998, 0.661883, 0.660068, 0.660991, 0.662094
    ]
}

df = pd.DataFrame(data)

# Set up a seaborn style
sns.set(style="whitegrid")

# Plot bar charts for various columns
fig, axes = plt.subplots(3, 2, figsize=(14, 14))

# List of columns to plot
columns = [
    'weights', 'avg_weights', 'ratio(task)', 'ratio(worker)', 'CPU time(s)', 'normal_worker_ratio'
]

# Plot each column
for i, col in enumerate(columns):
    ax = axes[i // 2, i % 2]
    sns.barplot(data=df, x='x', y=col, hue='workers', ax=ax)
    ax.set_title(f'{col} by workers and x')

# Adjust layout
plt.tight_layout()
plt.show()
